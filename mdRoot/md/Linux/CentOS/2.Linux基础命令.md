## Linux

### 0. 超级管理员

CentOS/RedHat系统的超级管理员账号为：`root`

### 1. 开胃小菜

不懂Linux控制台命令，相当于不懂Linux，因此我们要好好学习命令，学完以后，我们会爱上它们。先看几个开胃小菜，打开终端。

##### 1.1 关机

```shell
# 方法1
halt
# 方法2
poweroff
# 方法3 可以将now改成数字 表示多少分钟后执行
shutdown -h now
```

`shutdown`实际上是调用`init 0`, `init 0`会`cleanup`一些工作然后调用`halt`或者`poweroff`。其实主要区别是`halt`和`poweroff`，在没有`acpi`的系统上，`halt`只是关闭了操作系统，电源还在工作，你得手动取按一下那个按钮，而`poweroff`会发送一个关闭电源的信号给`acpi`。但在现在的很多系统上，他们实际上都一样了。

##### 1.2 重启

```shell
# 方法1
reboot
# 方法2 可以将now改成数字 表示多少分钟后执行
shutdown -r now
```

#### 1.3 注销登录

```
logout
```

整完了几个开胃小菜，我们发现，命令用起来很爽，只需要在键盘上敲几下就能完成以前我们使用各种鼠标+键盘一起配合才能完成的操作。其实我们可以这样理解：原来的图形界面化的操作其实是操作系统通过收集我们的鼠标+键盘操作的信息，然后分析出我们的意图，然后帮我们敲了命令，我们现在是直接运行命令，不过是省掉了前面让计算机猜测我们意图的过程和操作。

### 2. 命令

#### 2.1 Linux命令格式：

```shell
命令名称  [选项]  [参数] 
```

**说明：**

1. “命令名称”为必须项，“选项”和“参数”为可选的，“命令名称”、“选项”、“参数”这三项中间必须间隔至少一个空格。
2. “选项”和“参数”均可以有多个，多个可以分开写，也可以合并写在一起。
3. “选项”和“参数”如果同时存在，习惯上我们一般把“选项”放到“参数”前面。
4. “选项”前面大多数时候会以“-”开头，多个“选项”时大多数时候不分先后顺序。
5. 有的“选项”可能要求自己的“参数”，比如：`mysql -u root -h 192.168.1.10`。

当然，Linux目前拥有上万个命令，每个命令又有可能有很多“选项”和“参数”，使用组合非常的多，因此我们没有必要把所有的命令的具体使用全部记着，只要把常用的命令以及其选项怎么使用记着就行了，至于没记住的，我们完全可以随用随查，怎么查呢？有三种方式：

##### 2.1.1 使用`man`命令

```
man 你要查的命令名
```
比如：`man ls` 查询一下`ls`命令的使用方式。


##### 2.1.2 使用命令的`--h`或者`--help`选项

对于有些命令，其自带的有帮助文档，可以使用它。

比如：`tar --h`

不过有些命令并不带这些，因此适用范围较小。

##### 2.1.3 去相关网上查找或者去文档中

比如我们可以去：http://man.linuxde.net/

### 3. 再多来一点命令

#### 3.1 查看目录内容命令：`ls`

ls命令可以查看当前目录下的文件和目录，使用方法：

```
ls   [选项]   [目录(默认当前目录)]
```

它有很多选项，常用的有以下几个：
```
 -a 显示所有文件，包含隐藏文件
 -l 显示文件的详细信息
 -t 按照时间排序显示文件
 -h 以1024为单位显示文件信息
 -S 按照文件大小排序
```
#### 3.2 创建文件：`touch`

使用touch可以创建一个文件，使用方法：

```
touch  文件名
```

#### 3.3 查看内容命令：`cat`

使用方法：

```
cat 文件名
```
cat命令只能查看，不能修改。

#### 3.4 带分页的查看命令： `more`

如果我们查看很长的内容页面，用`cat`就比较不妥，不过我们可以使用`more`命令。使用方法：

```
more 文件名
```
`more`命令会自动给我们进行分页，我们可以使用`ctrl+f`或者`空格键`进行“下一页”切换；使用`ctrl+b`进行“上一页”切换。

如果需要更强大的功能，可以使用`less`命令，大家可以私下查一下资料。

#### 3.5 输出重定向：`>` 、`>>`

要学习管道，就要涉及到linux的“输出重定向”问题，所谓输出重定向是指，任何操作，如果有输出结果，它的输出结果都有默认的输出方向，比如`ls` 、`more`等命令的默认输出位置为显示屏，不过我们在需要的时候可以手动的在内容向默认输出方向前去修改输出方向。

```
> ：将输出的内容写入到一个地方（覆盖）。如：

ls -al > 1.txt

>>：将文件的内容写入到一个地方（追加）。如：

ls -al >> 1.txt
```

#### 3.6 管道命令：`|`

管道命令即是利用了“输出重定向”这个特性，所谓管道就是指：将“管道符”前命令的输出结果重定向到“管道符”后面的命令，作为后面命令的参数进行处理。

比如：`ls -l /etc | more`


#### 3.7 文本搜索命令：`grep`

`grep`命令是linux下强大的文本搜索命令，可以在文本中搜索关键词。使用方法：

```
grep 搜索的内容 被搜索的文件名
```

如：

```
# 在 install.log 中搜索字符“attr”
grep attr install.log
```

如果需要显示字符所在第几行，可以在命令中使用`-n`选项，如：
`grep -n attr install.log`

`grep`命令可以支持在多个文件中查找，如：

```
# 在当前目录下的所有文件中搜索
grep -n attr ./*
# 在某个目录下搜索
grep -n attr -r /etc/
```


当然`grep`也支持正则匹配等其他复杂的操作，这里就不多讲了，交给大家自己去研究吧。

#### 3.8 查找文件命令：`find`

`find`命令功能十分强大，不过这里我们暂且先只讲一个用法：在某个目录中根据文件名查找文件：

```
find 要查找的目录 -name 要查找的文件名。
```

如：`find / -name install.log` 表示：在根目录下查找文件名为install.log的文件

#### 3.9 查看/设置系统时间：`date`

##### 3.9.1 查看系统时间：

```
date
```

如果需要以指定的格式显示日期，可以使用“+”开头的字符串格式化输出，比如：

```
date "+%Y-%m-%d %H:%M:%S"
//带换行，带文字说明
date "+现在时刻：%n%Y-%m-%d %H:%I:%S"
//获取时间戳
date "+%s"
```

格式化时各种字符代表的意义（并不需要重点记忆，记住常用的即可）：

```
%n : 下一行
%t : 跳格
%H : 小时(00-23)
%I : 小时(01-12)
%k : 小时(0-23)
%l : 小时(1-12)
%M : 分钟(00-59)
%p : 显示本地 AM 或 PM
%r : 直接显示时间 (12 小时制，格式为 hh:mm:ss [AP]M)
%s : 从 1970 年 1 月 1 日 00:00:00 UTC 到目前为止的秒数
%S : 秒(00-60)
%T : 直接显示时间 (24 小时制)
%X : 相当于 %H:%M:%S
%Z : 显示时区
%a : 星期几 (Sun-Sat)
%A : 星期几 (Sunday-Saturday)
%b : 月份 (Jan-Dec)
%B : 月份 (January-December)
%c : 直接显示日期与时间
%d : 日 (01-31)
%D : 直接显示日期 (mm/dd/yy)
%h : 同 %b
%j : 一年中的第几天 (001-366)
%m : 月份 (01-12)
%U : 一年中的第几周 (00-53) (以 Sunday 为一周的第一天的情形)
%w : 一周中的第几天 (0-6)
%W : 一年中的第几周 (00-53) (以 Monday 为一周的第一天的情形)
%x : 直接显示日期 (mm/dd/yy)
%y : 年份的最后两位数字 (00.99)
%Y : 完整年份 (0000-9999)
```

##### 3.9.2 使用`-s`属性设置系统时间

```
date -s "2017-09-07 09:51:04"
```
#### 3.10 修改密码命令 `passwd`

#### 3.11 常用快捷键

`ctrl+c`：停止当前命令的执行

`ctrl+a`：将光标快速的切换到命令行最前端

`ctrl+e`：将光标快速的切换到命令行末端

`tab`：补全命令或者补全文件名/文件夹名，连按2次，会列出指定目录下指定开头字符的文件或者目录列表